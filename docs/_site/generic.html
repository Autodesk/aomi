<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="/aomi/assets/css/style.css?v=">
    <title>aomi by Autodesk</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>aomi</h1>
        <h2>Opinionlessly Express Opinions on Vault</h2>

        <section id="downloads">
          
          <a href="https://github.com/Autodesk/aomi" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1 id="overview">Overview</h1>

<p>The aomi tool may make use of different sources of data when writing to the generic secret backend of Vault. If the mountpoint does not exist it will be created as a <a href="https://www.vaultproject.io/docs/secrets/generic/">generic</a> secret store.</p>

<h1 id="format">Format</h1>

<p>The format will vary slightly depending on what your source data is.</p>

<h2 id="files">Files</h2>

<p>You may specify a list of files and their destination Vault secret item. Each <code class="highlighter-rouge">files</code> section has a list of source files, and the key name they should use in Vault. Each instance of a <code class="highlighter-rouge">files</code> section must also include a Vault mount point and path.  The following example would create two secrets (<code class="highlighter-rouge">private</code> and <code class="highlighter-rouge">public</code>) based on the two files under the <code class="highlighter-rouge">.secrets</code> directory and place them in the Vault path <code class="highlighter-rouge">foo/bar/baz</code>.</p>

<hr />
<p><code class="highlighter-rouge">Secretfile</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>secrets:
- files:
  - source: id_rsa
    name: private
  - source: id_rsa.pub
    name: public
  mount: foo/bar
  path: 'baz'
</code></pre>
</div>

<h2 id="variable-files">Variable Files</h2>

<p>You may define a preset list of secrets and associate them with a mountpoint and path. The <code class="highlighter-rouge">var_file</code> contains a list of YAML key value pairs. The following example would create two secrets (<code class="highlighter-rouge">user</code> and <code class="highlighter-rouge">password</code>) at the Vault path <code class="highlighter-rouge">foo/bar/baz</code>.</p>

<hr />

<p><code class="highlighter-rouge">Secretfile</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>secrets:
- var_file: 'foo.yml'
  mount: 'foo/bar'
  path: 'baz'
</code></pre>
</div>

<p><code class="highlighter-rouge">.secrets/foo.yml</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>user: 'foo'
password: 'bar'
</code></pre>
</div>

<h2 id="generated-secrets">Generated Secrets</h2>

<p>The aomi tool has the ability to populate a generic Vault path with random secrets. You still specify the mountpoint, path, and keys but not the contents. By default this is a write once operation but you can change this with the <code class="highlighter-rouge">overwrite</code> attribute. You can generate either random words or a uuid.</p>

<hr />

<p><code class="highlighter-rouge">Secretfile</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>secrets:
- generated:
    mount: 'foo'
    path: 'bar'
    keys:
    - name: 'username'
      method: 'words'
    - name: 'password'
      method: 'uuid'
      overwrite: true
</code></pre>
</div>

      </section>
    </div>

    
  </body>
</html>
