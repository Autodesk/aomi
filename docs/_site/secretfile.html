<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="/aomi/assets/css/style.css?v=">
    <title>aomi by Autodesk</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>aomi</h1>
        <h2>Opinionlessly Express Opinions on Vault</h2>

        <section id="downloads">
          
          <a href="https://github.com/Autodesk/aomi" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1 id="overview">Overview</h1>

<p>The Secretfile (which does not actually need to be called Secretfile) contains the data definition for operational secrets. This information is comprised of an aomi data type combiened with Vault mountpoint and path, along with associated metadata. It may contain references to complementary data, both secret and non-secret, which will also be written to vault. Examples include Vault policies and AWS credentials.</p>

<h1 id="general-structure">General Structure</h1>

<p>The Secretfile is interpreted as a YAML file. Prior to parsing, aomi will handle it as a <a href="http://jinja.pocoo.org/">Jinja2</a> template. This means you can have conditionals, includes, and external variables. There is a fair amount of flexibility in terms of how the data is structured. Once in YAML format, the data is interpreted based on a few broad categories.</p>

<ul>
  <li><code class="highlighter-rouge">secrets</code> is the most widely used section. It contains definitions for data that represents operational secrets. With the exception of the <code class="highlighter-rouge">generated</code> generic secret type, all of these entries will have companion files within the <code class="highlighter-rouge">.secrets</code> directory as used by aomi</li>
  <li>You can configure a few authentication types via aomi. Right now this is limited to general <a href="https://www.vaultproject.io/docs/auth/userpass.html">userpass</a> and <a href="https://www.vaultproject.io/docs/auth/mfa.html">DUO</a> support. Both of these constructs rely on files within <code class="highlighter-rouge">.secrets</code> as well.</li>
  <li>Vault policies and audit logs are also configurable. These do not have any secrets associated with them. Vault mountpoints are also manually definable.</li>
  <li>You can also define some metadata. This is limited to GPG/Keybase information, which is used for cold storage of secrets.</li>
</ul>

<p>Every entry which will affect Vault can be “tagged”. Any and all tags must be referenced in order for the entry to be processed.</p>

<h1 id="secrets">Secrets</h1>

<p><a href="/aomi/generics">Generic secrets</a> may be written to Vault based on one of three different formats. Static files can map to objects at a given Vault path. Each key in the object may map to a different file. YAML files map also map directly to objects at a given Vault path. And finally you may have “generated” secrets which can be random (or predefined) strings.</p>

<p>You can also setup <a href="/aomi/aws">AWS secret</a> backends. Roles may be either externally specified or specified inline.</p>

<h1 id="policies">Policies</h1>

<p>Policies may be manged <a href="/aomi/policies">separately</a> or in-line with supporting resources. It is recommended to manage each Vault resource separately.</p>

<h1 id="authentication-resources">Authentication Resources</h1>

<p>The aomi tool can <a href="/aomi/auth-resources">provision</a> appid, user auto, duo, and approle resources into Vault.</p>

      </section>
    </div>

    
  </body>
</html>
